# ü•ß PieStat Bot: AI-Powered Sales Tracker

Telegram-–±–æ—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É—á–µ—Ç–∞ –ø—Ä–æ–¥–∞–∂, –æ—Å—Ç–∞—Ç–∫–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ –º–∞–ª–æ–º –±–∏–∑–Ω–µ—Å–µ. –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –∏ —Ç–æ–≤–∞—Ä–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI-–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏—è.

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   üìä **–£—á–µ—Ç –ü—Ä–æ–¥—É–∫—Ü–∏–∏**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏, –æ—Å—Ç–∞—Ç–∫–æ–≤, —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ —Å–ø–∏—Å–∞–Ω–∏–π —á–µ—Ä–µ–∑ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ–µ –º–µ–Ω—é.
*   üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –û—Ç—á–µ—Ç—ã**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–æ–¥–∞–∂, –≤—ã—Ä—É—á–∫–∏ –∏ —á–∏—Å—Ç–æ–π –ø—Ä–∏–±—ã–ª–∏. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–≥–ª—è–¥–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∑–∞ –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é, –º–µ—Å—è—Ü –∏–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
*   ü§ñ **AI-–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Gemini –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ –æ–±—ä–µ–º—É –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å.
*   üß† **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ê–Ω–∞–ª–∏—Ç–∏–∫–∞**:
    *   –†–µ–π—Ç–∏–Ω–≥–∏ —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö –∏ –ø—Ä–æ–¥–∞–≤–∞–µ–º—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
    *   –ê–Ω–∞–ª–∏–∑ —Å—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–¥–∞–∂ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.
*   ‚è∞ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –û—Ç—á–µ—Ç—ã**: –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–¥–∞–∂–∞—Ö –≤—Å–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è.
*   ‚öôÔ∏è **–ì–∏–±–∫–∏–µ –ù–∞—Å—Ç—Ä–æ–π–∫–∏**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å —Ü–µ–Ω—ã –Ω–∞ –ø—Ä–æ–¥—É–∫—Ü–∏—é –ø—Ä—è–º–æ –≤ –±–æ—Ç–µ.
*   üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –î–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É —Å—Ç—Ä–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–ø–∏—Å–∫–æ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö `chat_id`.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                  | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è                                                              |
| -------------------------- | ----------------------------------------------------------------------- |
| **–°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**       | Node.js                                                                 |
| **–Ø–∑—ã–∫**                   | JavaScript (ES6+)                                                       |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**            | Supabase (PostgreSQL)                                                   |
| **–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Telegram** | `node-telegram-bot-api`                                                 |
| **–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç** | Google Gemini AI (`@google/generative-ai`)                            |
| **–í–µ–±-—Å–µ—Ä–≤–µ—Ä (Health Check)** | Express.js                                                              |
| **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á**      | `node-cron`                                                               |
| **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**           | Jest                                                                    |

## üèõÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —á–µ—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –∏ —É–ø—Ä–æ—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

-   `bot.js`: –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä). –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã, —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π.
-   `db.js`: –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º. –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö Supabase —á–µ—Ä–µ–∑ RPC-–≤—ã–∑–æ–≤—ã.
-   `gemini_service.js`: –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Google Gemini API.
-   `keyboards.js`: –°–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (UI). –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å.
-   `utils.js`: –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª, —Ä–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞).
-   `config.js`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞.
-   `__tests__/`: –ü–∞–ø–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ –Ω–∞ Jest.

> –í—Å—è –∫–ª—é—á–µ–≤–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Ä–∞—Å—á–µ—Ç—ã, –∞–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö) –≤—ã–Ω–µ—Å–µ–Ω–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö Supabase —Å –ø–æ–º–æ—â—å—é RPC-—Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/–≤–∞—à-–ª–æ–≥–∏–Ω/–≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.git
    cd –≤–∞—à-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
    ```

2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    npm install
    ```

3.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –ø–æ —à–∞–±–ª–æ–Ω—É –Ω–∏–∂–µ.

4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
    ```bash
    npm start
    ```

5.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏:**
    ```bash
    npm test
    ```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```env
# .env

# –ö–ª—é—á–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Supabase
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_supabase_anon_key

# –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ Telegram-–±–æ—Ç–∞
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# ID —á–∞—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–æ—Å—Ç—É–ø (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é, –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
ALLOWED_CHAT_IDS=12345678,87654321

# –ö–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Google Gemini API
GEMINI_API_KEY=your_gemini_api_key

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—Ç—á–µ—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
REPORT_SCHEDULE='0 20 * * *' # Cron-—Å—Ç—Ä–æ–∫–∞ (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 20:00)
REPORT_TIMEZONE='Asia/Tashkent'
```

## ‚òÅÔ∏è –î–µ–ø–ª–æ–π

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ **Render** –∫–∞–∫ **Web Service**.

1.  –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service –≤ –ø–∞–Ω–µ–ª–∏ Render –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
2.  –£–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å–±–æ—Ä–∫–∏: `npm install`.
3.  –£–∫–∞–∂–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞: `npm start`.
4.  –í —Ä–∞–∑–¥–µ–ª–µ **Environment Variables** –¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ –≤–∞—à–µ–≥–æ `.env` —Ñ–∞–π–ª–∞.
5.  –î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è "–∑–∞—Å—ã–ø–∞–Ω–∏—è" –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å –≤—Ä–æ–¥–µ **UptimeRobot**, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø–∏–Ω–≥–æ–≤–∞—Ç—å URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–∂–¥—ã–µ 5-15 –º–∏–Ω—É—Ç.
